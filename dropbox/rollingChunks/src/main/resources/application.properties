spring.application.name=rollingChunks
spring.datasource.url=jdbc:h2:mem:rollingchunks
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.h2.console.enabled=true

aws.s3.endpoint=http://localhost:4566
aws.sns.endpoint=http://localhost:4566
aws.sqs.endpoint=http://localhost:4566
aws.s3.region=us-east-1
aws.s3.bucket=dropbox-stage4
aws.accessKeyId=test
aws.secretAccessKey=test

# Non-text files are chunked into small, human-readable pieces for demo purposes.
app.chunk.binary.size-bytes=64

# Rolling/content-defined chunking (Stage 4) parameters.
# In LocalStack you can keep these small so you can observe what is happening.
# If you implement these as S3 multipart-upload PART sizes in real AWS, the allowed range is:
#   min 5 MiB (except the last part), max 5 GiB, and max 10,000 parts per object.
app.rolling.min-chunk-bytes=64
app.rolling.avg-chunk-bytes=256
app.rolling.max-chunk-bytes=1024

# Internal chunk objects are stored by content hash for deduplication.
app.chunk.object-prefix=chunks/sha256/

# Presigned URL expiry
app.presign.ttl-seconds=600

# Optional online notifications (example): publish DB change events to SNS and subscribe an SQS queue.
# Durable source-of-truth remains the DB change feed (/api/changes).
app.change-feed.notify.enabled=true
app.change-feed.notify.topic-name=file-change-topic
app.change-feed.notify.queue-name=file-change-queue
